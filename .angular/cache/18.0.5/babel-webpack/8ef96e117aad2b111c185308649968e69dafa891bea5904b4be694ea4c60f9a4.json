{"ast":null,"code":"import { Subscription } from 'rxjs';\nimport { Chart } from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nexport class CountryChartComponent {\n  constructor() {\n    this.subscription = new Subscription();\n  }\n  ngAfterViewInit() {\n    console.log(\"Pays re√ßu dans CountryChartComponent :\", this.country);\n    console.log(\"üìä Pays re√ßu dans CountryChartComponent :\", this.country);\n    if (this.country) {\n      this.createCountryChart();\n    }\n  }\n  createCountryChart() {\n    const ctx = document.getElementById('countryChart');\n    // Trouver la valeur maximale des m√©daille et calculer la dizaine sup√©rieure\n    const maxMedalsCount = Math.max(...this.country.participations.map(p => p.medalsCount));\n    const maxY = Math.ceil(maxMedalsCount / 10) * 10; // Arrondir √† la dizaine sup√©rieure\n    const sizeChart = Math.max(10, window.innerWidth * 0.016);\n    this.lineChart = new Chart(ctx, {\n      type: 'line',\n      data: {\n        labels: this.country.participations.map(p => p.year.toString()),\n        // Ann√©es\n        datasets: [{\n          label: 'Medals',\n          data: this.country.participations.map(p => p.medalsCount),\n          borderColor: '#42A5F5'\n        }]\n      },\n      options: {\n        responsive: true,\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: sizeChart\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true,\n            // L'axe des Y commence √† z√©ro\n            max: maxY // Utiliser la dizaine sup√©rieure comme valeur maximale de l'axe Y\n          }\n        }\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe(); // D√©sabonnement propre\n    console.log('ChartComponent d√©truit, abonnement nettoy√©.');\n  }\n  static #_ = this.…µfac = function CountryChartComponent_Factory(t) {\n    return new (t || CountryChartComponent)();\n  };\n  static #_2 = this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n    type: CountryChartComponent,\n    selectors: [[\"app-country-chart\"]],\n    inputs: {\n      country: \"country\"\n    },\n    decls: 2,\n    vars: 0,\n    consts: [[\"id\", \"countryChart\"]],\n    template: function CountryChartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.…µ…µelementStart(0, \"div\");\n        i0.…µ…µelement(1, \"canvas\", 0);\n        i0.…µ…µelementEnd();\n      }\n    },\n    styles: [\"div[_ngcontent-%COMP%] {\\n  padding: 30px;\\n  display: flex;\\n  justify-content: center;\\n  margin: 8vh;\\n}\\n\\n@media (max-width: 767px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 100%;\\n    text-align: center;\\n    font-size: 14px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 400px !important;\\n    height: 200px !important;\\n    font-size: 14px !important;\\n  }\\n}\\n@media (min-width: 768px) and (max-width: 1024px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 80%;\\n    font-size: 16px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 700px !important;\\n    height: 300px !important;\\n    font-size: 16px !important;\\n  }\\n}\\n@media (min-width: 1025px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 50%;\\n    font-size: 18px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 900px !important;\\n    height: 400px !important;\\n    font-size: 29px !important;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY291bnRyeS1jaGFydC9jb3VudHJ5LWNoYXJ0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLFdBQUE7QUFDRjs7QUFFQTtFQUNFO0lBQ0UsV0FBQTtJQUNBLGtCQUFBO0lBQ0EsZUFBQTtFQUNGO0VBRUE7SUFDRSx1QkFBQTtJQUNBLHVCQUFBO0lBQ0Esd0JBQUE7SUFDQSwwQkFBQTtFQUFGO0FBQ0Y7QUFHQTtFQUNFO0lBQ0UsVUFBQTtJQUNBLGVBQUE7RUFERjtFQUlBO0lBQ0UsdUJBQUE7SUFDQSx1QkFBQTtJQUNBLHdCQUFBO0lBQ0EsMEJBQUE7RUFGRjtBQUNGO0FBS0E7RUFDRTtJQUNFLFVBQUE7SUFDQSxlQUFBO0VBSEY7RUFNQTtJQUNFLHVCQUFBO0lBQ0EsdUJBQUE7SUFDQSx3QkFBQTtJQUNBLDBCQUFBO0VBSkY7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImRpdiB7XG4gIHBhZGRpbmc6IDMwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtYXJnaW46IDh2aDtcbn1cblxuQG1lZGlhIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gIC5jb2wtc20tNCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgfVxuXG4gIGNhbnZhcyB7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDQwMHB4ICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiAyMDBweCAhaW1wb3J0YW50O1xuICAgIGZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50O1xuICB9XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDEwMjRweCkge1xuICAuY29sLXNtLTQge1xuICAgIHdpZHRoOiA4MCU7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICB9XG5cbiAgY2FudmFzIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogNzAwcHggIWltcG9ydGFudDtcbiAgICBoZWlnaHQ6IDMwMHB4ICFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDEwMjVweCkge1xuICAuY29sLXNtLTQge1xuICAgIHdpZHRoOiA1MCU7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICB9XG5cbiAgY2FudmFzIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogOTAwcHggIWltcG9ydGFudDtcbiAgICBoZWlnaHQ6IDQwMHB4ICFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAyOXB4ICFpbXBvcnRhbnQ7XG4gIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Subscription","Chart","CountryChartComponent","constructor","subscription","ngAfterViewInit","console","log","country","createCountryChart","ctx","document","getElementById","maxMedalsCount","Math","max","participations","map","p","medalsCount","maxY","ceil","sizeChart","window","innerWidth","lineChart","type","data","labels","year","toString","datasets","label","borderColor","options","responsive","plugins","legend","font","size","scales","y","beginAtZero","ngOnDestroy","unsubscribe","_","_2","selectors","inputs","decls","vars","consts","template","CountryChartComponent_Template","rf","i0","…µ…µelementStart","…µ…µelement","…µ…µelementEnd"],"sources":["/Users/elyouzghinajia/devpment/OC/front-app-angular/src/app/pages/country-chart/country-chart.component.ts","/Users/elyouzghinajia/devpment/OC/front-app-angular/src/app/pages/country-chart/country-chart.component.html"],"sourcesContent":["import { Component, AfterViewInit, ElementRef, ViewChild, OnInit,OnDestroy, Input } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Olympic } from 'src/app/core/models/Olympic';\nimport { Chart } from 'chart.js/auto';\n\n@Component({\n  selector: 'app-country-chart',\n  templateUrl: './country-chart.component.html',\n  styleUrl: './country-chart.component.scss'\n})\n\nexport class CountryChartComponent implements AfterViewInit, OnDestroy {\n  private subscription: Subscription = new Subscription(); \n  @Input() country!: Olympic; // R√©cup√©ration des donn√©es du pays\n  private lineChart!: Chart; // Instance du graphique, stocke l‚Äôobjet Chart.js pour pouvoir le manipuler\n  \n\n  ngAfterViewInit(): void {\n    console.log(\"Pays re√ßu dans CountryChartComponent :\", this.country);\n    console.log(\"üìä Pays re√ßu dans CountryChartComponent :\", this.country);\n    if (this.country) {\n      this.createCountryChart();\n    }\n  }\n\n  createCountryChart(): void {\n    const ctx = document.getElementById('countryChart') as HTMLCanvasElement;\n\n    // Trouver la valeur maximale des m√©daille et calculer la dizaine sup√©rieure\n    const maxMedalsCount = Math.max(...this.country.participations.map(p => p.medalsCount));\n    const maxY = Math.ceil(maxMedalsCount / 10) * 10;  // Arrondir √† la dizaine sup√©rieure\n    const sizeChart = Math.max(10, window.innerWidth * 0.016)\n\n    this.lineChart = new Chart(ctx, {\n      \n      type: 'line',\n      data: {\n        labels: this.country.participations.map(p => p.year.toString()), // Ann√©es\n        datasets: [{\n          label: 'Medals',\n          data: this.country.participations.map(p => p.medalsCount),\n          borderColor: '#42A5F5',\n        }]\n      },\n      options: {\n        responsive: true,\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: sizeChart,\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true, // L'axe des Y commence √† z√©ro\n            max: maxY, // Utiliser la dizaine sup√©rieure comme valeur maximale de l'axe Y\n          }\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe(); // D√©sabonnement propre\n    console.log('ChartComponent d√©truit, abonnement nettoy√©.');\n  }\n}\n\n\n\n","<div>\n  <canvas id=\"countryChart\"></canvas>\n</div>"],"mappings":"AACA,SAASA,YAAY,QAAQ,MAAM;AAEnC,SAASC,KAAK,QAAQ,eAAe;;AAQrC,OAAM,MAAOC,qBAAqB;EANlCC,YAAA;IAOU,KAAAC,YAAY,GAAiB,IAAIJ,YAAY,EAAE;;EAKvDK,eAAeA,CAAA;IACbC,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAE,IAAI,CAACC,OAAO,CAAC;IACnEF,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAE,IAAI,CAACC,OAAO,CAAC;IACtE,IAAI,IAAI,CAACA,OAAO,EAAE;MAChB,IAAI,CAACC,kBAAkB,EAAE;IAC3B;EACF;EAEAA,kBAAkBA,CAAA;IAChB,MAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAsB;IAExE;IACA,MAAMC,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAG,IAAI,CAACP,OAAO,CAACQ,cAAc,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAAC,CAAC;IACvF,MAAMC,IAAI,GAAGN,IAAI,CAACO,IAAI,CAACR,cAAc,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,CAAE;IACnD,MAAMS,SAAS,GAAGR,IAAI,CAACC,GAAG,CAAC,EAAE,EAAEQ,MAAM,CAACC,UAAU,GAAG,KAAK,CAAC;IAEzD,IAAI,CAACC,SAAS,GAAG,IAAIxB,KAAK,CAACS,GAAG,EAAE;MAE9BgB,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE;QACJC,MAAM,EAAE,IAAI,CAACpB,OAAO,CAACQ,cAAc,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACW,IAAI,CAACC,QAAQ,EAAE,CAAC;QAAE;QACjEC,QAAQ,EAAE,CAAC;UACTC,KAAK,EAAE,QAAQ;UACfL,IAAI,EAAE,IAAI,CAACnB,OAAO,CAACQ,cAAc,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,CAAC;UACzDc,WAAW,EAAE;SACd;OACF;MACDC,OAAO,EAAE;QACPC,UAAU,EAAE,IAAI;QAChBC,OAAO,EAAE;UACPC,MAAM,EAAE;YACNT,MAAM,EAAE;cACNU,IAAI,EAAE;gBACJC,IAAI,EAAEjB;;;;SAIb;QACDkB,MAAM,EAAE;UACNC,CAAC,EAAE;YACDC,WAAW,EAAE,IAAI;YAAE;YACnB3B,GAAG,EAAEK,IAAI,CAAE;;;;KAIlB,CAAC;EACJ;EAEAuB,WAAWA,CAAA;IACT,IAAI,CAACvC,YAAY,CAACwC,WAAW,EAAE,CAAC,CAAC;IACjCtC,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;EAC5D;EAAC,QAAAsC,CAAA,G;qBAzDU3C,qBAAqB;EAAA;EAAA,QAAA4C,EAAA,G;UAArB5C,qBAAqB;IAAA6C,SAAA;IAAAC,MAAA;MAAAxC,OAAA;IAAA;IAAAyC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,+BAAAC,EAAA,EAAA5C,GAAA;MAAA,IAAA4C,EAAA;QCXlCC,EAAA,CAAAC,cAAA,UAAK;QACHD,EAAA,CAAAE,SAAA,gBAAmC;QACrCF,EAAA,CAAAG,YAAA,EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}