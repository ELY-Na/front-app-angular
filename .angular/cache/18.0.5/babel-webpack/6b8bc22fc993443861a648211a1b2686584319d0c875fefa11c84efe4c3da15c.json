{"ast":null,"code":"import { Subscription, take } from 'rxjs';\nimport { Chart } from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/olympic.service\";\nimport * as i2 from \"@angular/router\";\nconst _c0 = [\"myChart\"];\nexport class ChartComponent {\n  constructor(olympicService, router) {\n    this.olympicService = olympicService;\n    this.router = router;\n    // Stocker l'abonnement\n    this.subscription = new Subscription();\n  } // Ajout de l'injection\n  ngOnInit() {\n    this.olympicService.getOlympicData().pipe(take(1)).subscribe(({\n      labels,\n      data,\n      ids\n    }) => {\n      console.log('create chart');\n      this.createChart(labels, data, ids); // Passe les donn√©es au graphique\n    });\n  }\n  // Chart home page\n  createChart(labels, values, ids) {\n    const sizeChart = Math.max(10, window.innerWidth * 0.016);\n    this.chart = new Chart(this.myChart.nativeElement, {\n      type: 'pie',\n      // this.chartType as ChartType\n      data: {\n        labels: labels,\n        // Utilisation des labels dynamiques\n        datasets: [{\n          label: 'Medal per country',\n          data: values,\n          // Utilisation des valeurs dynamiques\n          borderWidth: 1,\n          backgroundColor: ['red', 'blue', 'yellow', 'green', 'purple']\n        }]\n      },\n      options: {\n        responsive: true,\n        layout: {\n          padding: 20\n        },\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: sizeChart\n              }\n            }\n          }\n        },\n        onClick: (event, elements) => {\n          if (elements.length > 0) {\n            const index = elements[0].index;\n            const countryId = ids[index]; // üîπ R√©cup√®re l'ID du pays cliqu√©\n            console.log(\"‚úÖ Clic d√©tect√© sur l'ID :\", countryId);\n            this.navigateToCountry(countryId);\n          } else {\n            console.log(\"‚ùå Aucun √©l√©ment s√©lectionn√©\");\n          }\n        }\n      }\n    });\n  }\n  navigateToCountry(countryId) {\n    console.log(\"üöÄ Redirection vers la page de d√©tails du pays avec l'ID :\", countryId);\n    this.router.navigate([`/country/${countryId}`]); // üîπ Utilisation de l'ID dans l'URL\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe(); // D√©sabonnement propre\n    console.log('ChartComponent d√©truit, abonnement nettoy√©.');\n  }\n  static #_ = this.…µfac = function ChartComponent_Factory(t) {\n    return new (t || ChartComponent)(i0.…µ…µdirectiveInject(i1.OlympicService), i0.…µ…µdirectiveInject(i2.Router));\n  };\n  static #_2 = this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n    type: ChartComponent,\n    selectors: [[\"app-chart\"]],\n    viewQuery: function ChartComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.…µ…µviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.…µ…µqueryRefresh(_t = i0.…µ…µloadQuery()) && (ctx.myChart = _t.first);\n      }\n    },\n    inputs: {\n      participations: \"participations\"\n    },\n    decls: 3,\n    vars: 0,\n    consts: [[\"myChart\", \"\"], [2, \"height\", \"40vh\", \"width\", \"40vw\"]],\n    template: function ChartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.…µ…µelementStart(0, \"div\");\n        i0.…µ…µelement(1, \"canvas\", 1, 0);\n        i0.…µ…µelementEnd();\n      }\n    },\n    styles: [\"div[_ngcontent-%COMP%] {\\n  padding: 30px;\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n@media (max-width: 767px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 100%;\\n    text-align: center;\\n    font-size: 14px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 500px !important;\\n    height: 500px !important;\\n    font-size: 14px !important;\\n  }\\n}\\n@media (min-width: 768px) and (max-width: 1024px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 80%;\\n    font-size: 16px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 600px !important;\\n    height: 600px !important;\\n    font-size: 16px !important;\\n  }\\n}\\n@media (min-width: 1025px) {\\n  .col-sm-4[_ngcontent-%COMP%] {\\n    width: 50%;\\n    font-size: 18px;\\n  }\\n  canvas[_ngcontent-%COMP%] {\\n    justify-content: center;\\n    width: 800px !important;\\n    height: 800px !important;\\n    font-size: 18px !important;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY2hhcnQvY2hhcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0FBQ0Y7O0FBRUE7RUFDRTtJQUNFLFdBQUE7SUFDQSxrQkFBQTtJQUNBLGVBQUE7RUFDRjtFQUVBO0lBQ0UsdUJBQUE7SUFDQSx1QkFBQTtJQUNBLHdCQUFBO0lBQ0EsMEJBQUE7RUFBRjtBQUNGO0FBR0E7RUFDRTtJQUNFLFVBQUE7SUFDQSxlQUFBO0VBREY7RUFJQTtJQUNFLHVCQUFBO0lBQ0EsdUJBQUE7SUFDQSx3QkFBQTtJQUNBLDBCQUFBO0VBRkY7QUFDRjtBQU1BO0VBQ0U7SUFDRSxVQUFBO0lBQ0EsZUFBQTtFQUpGO0VBT0E7SUFDRSx1QkFBQTtJQUNBLHVCQUFBO0lBQ0Esd0JBQUE7SUFDQSwwQkFBQTtFQUxGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJkaXYge1xuICBwYWRkaW5nOiAzMHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuQG1lZGlhIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gIC5jb2wtc20tNCB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgfVxuXG4gIGNhbnZhcyB7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgd2lkdGg6IDUwMHB4ICFpbXBvcnRhbnQ7XG4gICAgaGVpZ2h0OiA1MDBweCAhaW1wb3J0YW50O1xuICAgIGZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50O1xuICB9XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDEwMjRweCkge1xuICAuY29sLXNtLTQge1xuICAgIHdpZHRoOiA4MCU7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICB9XG5cbiAgY2FudmFzIHtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogNjAwcHggIWltcG9ydGFudDtcbiAgICBoZWlnaHQ6IDYwMHB4ICFpbXBvcnRhbnQ7XG4gICAgZm9udC1zaXplOiAxNnB4ICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuXG5AbWVkaWEgKG1pbi13aWR0aDogMTAyNXB4KSB7XG4gIC5jb2wtc20tNCB7XG4gICAgd2lkdGg6IDUwJTtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gIH1cblxuICBjYW52YXMge1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiA4MDBweCAhaW1wb3J0YW50O1xuICAgIGhlaWdodDogODAwcHggIWltcG9ydGFudDtcbiAgICBmb250LXNpemU6IDE4cHggIWltcG9ydGFudDtcbiAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["Subscription","take","Chart","ChartComponent","constructor","olympicService","router","subscription","ngOnInit","getOlympicData","pipe","subscribe","labels","data","ids","console","log","createChart","values","sizeChart","Math","max","window","innerWidth","chart","myChart","nativeElement","type","datasets","label","borderWidth","backgroundColor","options","responsive","layout","padding","plugins","legend","font","size","onClick","event","elements","length","index","countryId","navigateToCountry","navigate","ngOnDestroy","unsubscribe","_","i0","…µ…µdirectiveInject","i1","OlympicService","i2","Router","_2","selectors","viewQuery","ChartComponent_Query","rf","ctx","…µ…µelementStart","…µ…µelement","…µ…µelementEnd"],"sources":["/Users/elyouzghinajia/devpment/OC/front-app-angular/src/app/pages/chart/chart.component.ts","/Users/elyouzghinajia/devpment/OC/front-app-angular/src/app/pages/chart/chart.component.html"],"sourcesContent":["import { Component, OnInit, ElementRef, ViewChild, OnDestroy, Input } from '@angular/core';\nimport { Subscription, take } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { OlympicService } from '../../core/services/olympic.service'; // Import du service\nimport { Chart } from 'chart.js/auto';\n\n@Component({ // Cr√©ation du component\n  selector: 'app-chart',\n  templateUrl: './chart.component.html',\n  styleUrl: './chart.component.scss'\n})\n\nexport class ChartComponent implements OnInit, OnDestroy {\n  // M√©daille par ann√©e\n  @Input() participations!: { year: number; medalsCount: number }[]; \n  // Stocker l'abonnement\n  private subscription: Subscription = new Subscription(); \n\n  // Utilisation de ViewChild plus performant que getElementById\n  @ViewChild('myChart') myChart!: ElementRef<HTMLCanvasElement>; // S√©lectionne l‚Äô√©l√©ment HTML <canvas> avec l‚ÄôID #myChart\n\n  constructor(private olympicService: OlympicService, private router: Router) {} // Ajout de l'injection\n\n  private chart!: Chart; // Stocke l‚Äôobjet Chart.js pour pouvoir le manipuler\n\n  ngOnInit() {\n    this.olympicService.getOlympicData().pipe(take(1)).subscribe(({ labels, data, ids }) => {\n      console.log('create chart')\n      this.createChart(labels, data, ids); // Passe les donn√©es au graphique\n    });\n  }\n\n  // Chart home page\n  createChart(labels: string[], values: number[], ids: number[]) {\n    const sizeChart = Math.max(10, window.innerWidth * 0.016)\n    this.chart = new Chart(this.myChart.nativeElement, {\n      type: 'pie',  // this.chartType as ChartType\n      data: {\n        labels: labels, // Utilisation des labels dynamiques\n        datasets: [{\n          label: 'Medal per country',\n          data: values, // Utilisation des valeurs dynamiques\n          borderWidth: 1,\n          backgroundColor: ['red', 'blue', 'yellow', 'green', 'purple']\n        }]\n      },\n      options: {\n        responsive: true,\n        layout: {\n          padding: 20\n        },\n        plugins: {\n          legend: {\n            labels: {\n              font: {\n                size: sizeChart,\n              }\n            }\n          }\n        },\n        onClick: (event, elements) => {\n          if (elements.length > 0) {\n            const index = elements[0].index;\n            const countryId = ids[index]; // üîπ R√©cup√®re l'ID du pays cliqu√©\n            console.log(\"‚úÖ Clic d√©tect√© sur l'ID :\", countryId);\n            this.navigateToCountry(countryId);\n          } else {\n            console.log(\"‚ùå Aucun √©l√©ment s√©lectionn√©\");\n          }\n        }\n      }\n    })\n  };\n\n  navigateToCountry(countryId: number) {\n    console.log(\"üöÄ Redirection vers la page de d√©tails du pays avec l'ID :\", countryId);\n    this.router.navigate([`/country/${countryId}`]); // üîπ Utilisation de l'ID dans l'URL\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe(); // D√©sabonnement propre\n    console.log('ChartComponent d√©truit, abonnement nettoy√©.');\n  }\n}\n","<div>\n  <canvas style=\"height:40vh; width:40vw;\" #myChart></canvas>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}